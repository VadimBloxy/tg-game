<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Cowboy Drone Hunter</title>
    <style>
        body { margin: 0; background: #222; font-family: 'Courier New', monospace; color: white; overflow: hidden; user-select: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; background: #443322; display: none; }
        
        /* –ú–µ–Ω—é */
        #menu, #inventory-screen { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .btn { padding: 15px 40px; background: #aa7744; border: 4px solid #553311; color: white; cursor: pointer; font-size: 24px; margin: 10px; }
        .btn:hover { background: #cc9966; }

        /* –ò–≥—Ä–æ–∫ –∏ –û–±—ä–µ–∫—Ç—ã */
        #player { position: absolute; bottom: 100px; left: 50px; width: 60px; height: 60px; background: #ffcc99; border: 3px solid #5d4037; border-radius: 10px; }
        #player::after { content: 'ü§†'; font-size: 40px; position: absolute; top: -10px; left: 5px; }
        .bullet { position: absolute; width: 15px; height: 5px; background: gold; border-radius: 2px; }
        .drone { position: absolute; width: 40px; height: 30px; background: #333; border: 2px solid #00ff00; }
        .drone::before { content: 'üõ∏'; position: absolute; top: -5px; left: 5px; }

        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        #progress-bar { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); width: 300px; height: 20px; border: 2px solid white; }
        #progress-fill { width: 0%; height: 100%; background: #00ff00; }
        
        /* GUI –û—Ä—É–∂–∏—è */
        #loot-gui { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #333; padding: 20px; border: 5px solid gold; display: none; text-align: center; }
    </style>
</head>
<body>

    <div id="menu">
        <h1>COWBOY SIMULATOR</h1>
        <div class="btn" onclick="startGame()">–ù–ê–ß–ê–¢–¨ –£–†–û–í–ï–ù–¨ 1</div>
        <div class="btn" onclick="toggleInv()">–ò–ù–í–ï–ù–¢–ê–†–¨</div>
    </div>

    <div id="inventory-screen" style="display: none;">
        <h2>–ò–ù–í–ï–ù–¢–ê–†–¨</h2>
        <div id="items-list"></div>
        <div class="btn" onclick="toggleInv()">–ó–ê–ö–†–´–¢–¨</div>
    </div>

    <div id="game-container">
        <div id="progress-bar"><div id="progress-fill"></div></div>
        <div id="player"></div>
        
        <div id="loot-gui">
            <h2 id="loot-name">–ù–ê–ô–î–ï–ù–û –û–†–£–ñ–ò–ï!</h2>
            <p id="loot-stats"></p>
            <button class="btn" id="take-btn">–í–ó–Ø–¢–¨</button>
            <button class="btn" onclick="closeLoot()">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

<script>
    const state = {
        running: false,
        distance: 0,
        finish: 2000,
        inventory: [{ name: "–ë–∞–∑–æ–≤—ã–µ –ø–µ—Å—Ç–∏–∫–∏", dmg: 10, cd: 300 }],
        equipped: 0,
        lastShot: 0
    };

    let drones = [];
    let bullets = [];

    function startGame() {
        document.getElementById('menu').style.display = 'none';
        document.getElementById('game-container').style.display = 'block';
        state.running = true;
        state.distance = 0;
        spawnDrone();
        animate();
    }

    function spawnDrone() {
        if(!state.running) return;
        drones.push({ x: window.innerWidth, y: Math.random() * (window.innerHeight - 200) + 50, el: null });
        setTimeout(spawnDrone, 1500);
    }

    function fire() {
        const now = Date.now();
        const weapon = state.inventory[state.equipped];
        if (now - state.lastShot > weapon.cd) {
            bullets.push({ x: 110, y: window.innerHeight - 100 - 30, el: null });
            state.lastShot = now;
        }
    }

    window.onclick = () => { if(state.running) fire(); };

    function animate() {
        if(!state.running) return;

        // –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥
        state.distance += 2;
        document.getElementById('progress-fill').style.width = (state.distance / state.finish * 100) + '%';

        // –î—Ä–æ–Ω—ã
        drones.forEach((d, i) => {
            if(!d.el) {
                d.el = document.createElement('div');
                d.el.className = 'drone';
                document.getElementById('game-container').appendChild(d.el);
            }
            d.x -= 5;
            d.el.style.left = d.x + 'px';
            d.el.style.top = d.y + 'px';
            if(d.x < -50) { d.el.remove(); drones.splice(i, 1); }
        });

        // –ü—É–ª–∏
        bullets.forEach((b, i) => {
            if(!b.el) {
                b.el = document.createElement('div');
                b.el.className = 'bullet';
                document.getElementById('game-container').appendChild(b.el);
            }
            b.x += 10;
            b.el.style.left = b.x + 'px';
            b.el.style.bottom = (window.innerHeight - b.y - 120) + 'px';

            // –ü–æ–ø–∞–¥–∞–Ω–∏–µ
            drones.forEach((d, di) => {
                if(b.x > d.x && b.x < d.x + 40 && b.y > d.y && b.y < d.y + 30) {
                    d.el.remove(); drones.splice(di, 1);
                    b.el.remove(); bullets.splice(i, 1);
                }
            });
        });

        if(state.distance >= state.finish) winLevel();
        else requestAnimationFrame(animate);
    }

    function winLevel() {
        state.running = false;
        const weapons = [
            { name: "–ú–∞–≥–Ω—É–º", dmg: 40, cd: 800 },
            { name: "–ó–æ–ª–æ—Ç—ã–µ —Ä–µ–≤–æ–ª—å–≤–µ—Ä—ã", dmg: 25, cd: 200 },
            { name: "–î—Ä–æ–±–æ–≤–∏–∫", dmg: 50, cd: 1200 }
        ];
        const found = weapons[Math.floor(Math.random() * weapons.length)];
        
        document.getElementById('loot-gui').style.display = 'block';
        document.getElementById('loot-name').innerText = found.name;
        document.getElementById('loot-stats').innerText = `–î–∞–º–∞–≥: ${found.dmg} | –ö–î: ${found.cd}–º—Å`;
        
        document.getElementById('take-btn').onclick = () => {
            state.inventory.push(found);
            closeLoot();
        };
    }

    function closeLoot() {
        document.getElementById('loot-gui').style.display = 'none';
        document.getElementById('game-container').style.display = 'none';
        document.getElementById('menu').style.display = 'flex';
        // –û—á–∏—Å—Ç–∫–∞
        drones.forEach(d => d.el.remove()); drones = [];
        bullets.forEach(b => b.el.remove()); bullets = [];
    }

    function toggleInv() {
        const inv = document.getElementById('inventory-screen');
        if(inv.style.display === 'none') {
            inv.style.display = 'flex';
            const list = document.getElementById('items-list');
            list.innerHTML = state.inventory.map((item, i) => `
                <div style="border: 1px solid white; padding: 10px; margin: 5px;">
                    <b>${item.name}</b> (–£—Ä–æ–Ω: ${item.dmg}, –ö–î: ${item.cd})
                    <button onclick="state.equipped=${i}; alert('–≠–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–æ!')">–í–ó–Ø–¢–¨</button>
                </div>
            `).join('');
        } else {
            inv.style.display = 'none';
        }
    }
</script>
</body>
</html>
