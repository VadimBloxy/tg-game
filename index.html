<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Cowboy Legend: Part 1 - Interface & Stats</title>
    <style>
        :root { --sand: #e2a76f; --sky: #87ceeb; --canyon: #a0522d; }
        body { margin: 0; background: #111; font-family: 'Verdana', sans-serif; overflow: hidden; color: white; user-select: none; }
        
        /* Слой игрового мира */
        #world { position: fixed; inset: 0; background: var(--sky); z-index: 1; }
        #ground { position: absolute; bottom: 0; width: 100%; height: 150px; background: var(--sand); border-top: 5px solid #c48a57; z-index: 2; }
        
        /* Декорации без багов наложения */
        .decor { position: absolute; bottom: 150px; pointer-events: none; }
        .canyon { width: 500px; height: 300px; background: var(--canyon); border-radius: 50% 50% 0 0; opacity: 0.6; filter: blur(2px); }
        .cactus { width: 20px; height: 60px; background: #2d5a27; border-radius: 10px; z-index: 3; }

        /* Ковбой */
        #cowboy { position: absolute; bottom: 140px; left: 80px; width: 50px; height: 60px; z-index: 10; transition: transform 0.2s; }
        .hat { position: absolute; top: 0; width: 44px; height: 12px; background: #4e342e; border-radius: 5px; left: 3px; }
        .head { position: absolute; top: 8px; width: 20px; height: 20px; background: #ffcc99; left: 15px; border-radius: 3px; }
        .body { position: absolute; top: 25px; width: 30px; height: 30px; background: #aa7744; left: 10px; border-radius: 4px; }
        .gun { position: absolute; top: 35px; width: 28px; height: 12px; border-radius: 2px; box-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .gun-l { left: -18px; } .gun-r { right: -18px; }
        
        @keyframes menuJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-25px); } }
        .menu-animation { animation: menuJump 0.8s infinite ease-in-out; }

        /* Интерфейсы - Исправленный Блюр (без полос) */
        .screen-overlay { 
            position: fixed; inset: 0; 
            background: rgba(0, 0, 0, 0.3); 
            backdrop-filter: blur(12px); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            z-index: 100;
        }

        .btn { 
            padding: 15px 40px; background: #8d6e63; border: none; 
            border-bottom: 5px solid #4e342e; color: white; cursor: pointer; 
            font-size: 20px; margin: 10px; border-radius: 12px; font-weight: bold; 
        }
        .btn:hover { background: #a1887f; transform: scale(1.05); }

        /* Карточка оружия */
        .card {
            background: rgba(0,0,0,0.7); padding: 20px; border: 3px solid; 
            border-radius: 15px; text-align: center; min-width: 200px;
        }
        .card h3 { margin: 0 0 10px 0; font-size: 22px; }
        .stats-box { font-size: 14px; color: #ccc; line-height: 1.6; margin-bottom: 15px; }
        .stats-box b { color: gold; font-family: monospace; font-size: 16px; }

        #progress { position: fixed; top: 30px; left: 50%; transform: translateX(-50%); width: 350px; height: 12px; background: rgba(0,0,0,0.4); border-radius: 10px; display: none; z-index: 50; overflow: hidden; }
        #progress-bar { width: 0%; height: 100%; background: gold; box-shadow: 0 0 10px gold; }
    </style>
</head>
<body>

    <div id="world">
        <div id="ground"></div>
        <div id="cowboy" class="menu-animation">
            <div class="hat"></div><div class="head"></div><div class="body"></div>
            <div id="gun-l" class="gun gun-l"></div>
            <div id="gun-r" class="gun gun-r"></div>
        </div>
    </div>

    <div id="progress"><div id="progress-bar"></div></div>

    <div id="main-menu" class="screen-overlay">
        <h1 style="color: gold; font-size: 55px; text-shadow: 4px 4px #4e342e; margin-bottom: 40px;">COWBOY LEGEND</h1>
        <button class="btn" onclick="startPart1()">ИГРАТЬ</button>
        <button class="btn" onclick="openInv()">ИНВЕНТАРЬ</button>
    </div>

    <div id="inv-screen" class="screen-overlay" style="display: none;">
        <h2 style="color: gold; font-size: 35px;">ВАШ АРСЕНАЛ</h2>
        <div id="inv-list" style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px;"></div>
        <button class="btn" onclick="closeInv()">ЗАКРЫТЬ</button>
    </div>

<script>
    const game = {
        running: false,
        distance: 0,
        finish: 2000,
        currentWeapon: 0,
        weapons: [
            { name: "Старые пушки", dmg: 10, spd: 450, color: "#555" },
            { name: "Золотой Смит", dmg: 120, spd: 900, color: "gold" }
        ]
    };

    function startPart1() {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('progress').style.display = 'block';
        document.getElementById('cowboy').classList.remove('menu-animation');
        game.running = true;
        updateVisuals();
    }

    function updateVisuals() {
        const w = game.weapons[game.currentWeapon];
        document.getElementById('gun-l').style.backgroundColor = w.color;
        document.getElementById('gun-r').style.backgroundColor = w.color;
    }

    function openInv() {
        document.getElementById('main-menu').style.display = 'none';
        const screen = document.getElementById('inv-screen');
        screen.style.display = 'flex';
        
        const list = document.getElementById('inv-list');
        list.innerHTML = game.weapons.map((w, i) => `
            <div class="card" style="border-color: ${w.color}">
                <h3 style="color: ${w.color}">${w.name}</h3>
                <div class="stats-box">
                    УРОН: <b>${w.dmg}</b><br>
                    ОТКАТ: <b>${w.spd}мс</b>
                </div>
                ${game.currentWeapon === i ? 
                    '<div style="color:gold; font-weight:bold">В РУКАХ</div>' : 
                    `<button class="btn" style="font-size:14px; padding:5px 15px;" onclick="selectWeapon(${i})">ВЗЯТЬ</button>`}
            </div>
        `).join('');
    }

    function selectWeapon(i) {
        game.currentWeapon = i;
        updateVisuals();
        openInv(); // Обновить список
    }

    function closeInv() {
        document.getElementById('inv-screen').style.display = 'none';
        document.getElementById('main-menu').style.display = 'flex';
    }

    // Инициализация декораций (фон)
    const world = document.getElementById('world');
    for(let i=0; i<15; i++) {
        const d = document.createElement('div');
        const isCactus = Math.random() > 0.4;
        d.className = `decor ${isCactus ? 'cactus' : 'canyon'}`;
        d.style.left = (Math.random() * 2000) + 'px';
        world.appendChild(d);
    }
</script>
</body>
</html>
