<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TERMINAL GOD: DARKNET EDITION 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* CSS ПЕРЕМЕННЫЕ И ОСНОВНЫЕ СТИЛИ */
        :root {
            --n: #00ff00;    /* Neon Green */
            --nb: #003300;   /* Dark Green */
            --bg: #000000;   /* Black */
            --err: #ff0033;  /* Cyber Red */
            --gold: #ffcc00; /* Gold */
            --blue: #00ccff; /* Cyber Blue */
            --purp: #cc00ff; /* Void Purple */
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            scrollbar-width: none;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--n);
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            overflow: hidden;
            height: 100vh;
        }

        /* CRT И ГЛИТЧ ЭФФЕКТЫ */
        .crt::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%),
                        linear-gradient(90deg, rgba(255, 0, 0, 0.04), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.04));
            z-index: 9999;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .scan {
            position: absolute; width: 100%; height: 100px;
            background: linear-gradient(to bottom, transparent, rgba(0, 255, 0, 0.05), transparent);
            animation: scanline 8s linear infinite;
            pointer-events: none; z-index: 9998;
        }

        /* ОСНОВНОЙ КОНТЕЙНЕР */
        .app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 10px;
            z-index: 10;
            position: relative;
        }

        /* ВЕРХНЯЯ ПАНЕЛЬ (HUD) */
        .hud {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            border: 3px double var(--n);
            padding: 10px;
            background: #010;
            margin-bottom: 10px;
            box-shadow: 0 0 15px var(--nb);
        }

        .hud-item { font-size: 7px; line-height: 1.5; }
        .val { color: #fff; text-shadow: 0 0 8px var(--n); }
        .bar-w { width: 100%; height: 8px; background: #111; border: 1px solid var(--n); margin-top: 5px; position: relative; }
        .bar-f { height: 100%; background: var(--n); width: 0%; transition: width 0.3s; }
        .bar-t { position: absolute; width: 100%; text-align: center; font-size: 5px; top: 1px; color: #fff; mix-blend-mode: difference; }

        /* ИГРОВОЕ ОКНО */
        .viewport {
            flex-grow: 1;
            border: 2px solid var(--n);
            position: relative;
            overflow: hidden;
            background: rgba(0, 10, 0, 0.9);
            box-shadow: inset 0 0 20px #000;
        }

        .screen {
            display: none;
            height: 100%;
            padding: 12px;
            overflow-y: auto;
        }

        .screen.active { display: block; }

        /* ТЕРМИНАЛ И БОССЫ */
        #log { font-size: 8px; line-height: 1.6; }
        .line { margin-bottom: 4px; border-left: 2px solid var(--nb); padding-left: 8px; animation: in 0.2s ease; }
        @keyframes in { from { opacity: 0; transform: translateX(-5px); } to { opacity: 1; transform: translateX(0); } }
        
        .boss-area {
            background: #200; border: 2px solid var(--err);
            padding: 10px; margin-bottom: 10px; text-align: center;
            display: none;
        }
        .boss-active { display: block; animation: shake 0.3s infinite; }
        @keyframes shake { 0% { margin-left: 0; } 25% { margin-left: 2px; } 50% { margin-left: 0; } 75% { margin-left: -2px; } }

        /* КАРТОЧКИ ОБЪЕКТОВ */
        .card {
            border: 1px solid var(--nb);
            background: #010;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.2s;
        }
        .card:hover { border-color: var(--n); background: #020; }
        .card-meta { flex-grow: 1; }
        .card-name { font-size: 9px; color: var(--n); margin-bottom: 5px; display: block; }
        .card-desc { font-size: 6px; color: #7a7; line-height: 1.3; }
        .card-price { font-size: 7px; color: var(--gold); margin-top: 5px; display: block; }

        .btn {
            background: var(--n);
            color: #000;
            border: none;
            font-family: 'Press Start 2P';
            font-size: 8px;
            padding: 10px 15px;
            cursor: pointer;
            box-shadow: 3px 3px 0 var(--nb);
        }
        .btn:active { transform: translate(2px, 2px); box-shadow: none; }
        .btn:disabled { background: #222; color: #555; box-shadow: none; cursor: not-allowed; }

        /* НАВИГАЦИЯ */
        .nav {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 4px;
            margin-top: 10px;
        }
        .nav-btn {
            background: #000;
            border: 1px solid var(--n);
            color: var(--n);
            padding: 12px 0;
            font-family: 'Press Start 2P';
            font-size: 6px;
            cursor: pointer;
        }
        .nav-btn.active { background: var(--n); color: #000; }

        /* ЧАСТИЦЫ И ЭФФЕКТЫ */
        .p { position: absolute; pointer-events: none; animation: p-up 0.8s ease-out forwards; font-weight: bold; z-index: 1000; }
        @keyframes p-up { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-80px) rotate(20deg); } }

        .glitch-flash {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; opacity: 0; pointer-events: none; z-index: 9999;
        }
    </style>
</head>
<body class="crt">
    <div class="scan"></div>
    <div id="flash" class="glitch-flash"></div>

    <div class="app">
        <header class="hud">
            <div class="hud-item">
                BYTES: <span id="v-bytes" class="val">0</span><br>
                BPS: <span id="v-spd" class="val">0</span>
            </div>
            <div class="hud-item" style="text-align: right;">
                LVL: <span id="v-lvl" class="val">1</span><br>
                PTS: <span id="v-pts" class="val">0</span>
            </div>
            <div class="hud-item" style="grid-column: span 2;">
                SYSTEM INTEGRITY (XP):
                <div class="bar-w">
                    <div id="f-exp" class="bar-f" style="background: var(--blue);"></div>
                    <div id="t-exp" class="bar-t">0 / 100</div>
                </div>
            </div>
        </header>

        <main class="viewport" id="tap-zone">
            
            <div id="s-exe" class="screen active">
                <div id="boss-ui" class="boss-area">
                    <div style="font-size: 8px; margin-bottom: 5px;">!!! FIREWALL DETECTED !!!</div>
                    <div class="bar-w" style="border-color: var(--err);">
                        <div id="f-boss" class="bar-f" style="background: var(--err);"></div>
                        <div id="t-boss" class="bar-t">HP: 1000</div>
                    </div>
                </div>
                <div id="log"></div>
            </div>

            <div id="s-shop" class="screen">
                <h2 style="font-size: 10px; color: var(--gold); border-bottom: 1px solid; padding-bottom: 5px;">HARDWARE_MARKET</h2>
                <div id="shop-list"></div>
            </div>

            <div id="s-skill" class="screen">
                <h2 style="font-size: 10px; color: var(--blue); border-bottom: 1px solid; padding-bottom: 5px;">SKILL_TREE</h2>
                <div id="skill-list"></div>
            </div>

            <div id="s-dark" class="screen">
                <h2 style="font-size: 10px; color: var(--purp); border-bottom: 1px solid; padding-bottom: 5px;">DARKNET_DEALS</h2>
                <p style="font-size: 6px;">Cтраница обновляется только при перезагрузке системы.</p>
                <div id="dark-list"></div>
            </div>

            <div id="s-sys" class="screen">
                <h3>KERNEL_INFO</h3>
                <div id="stat-content" style="font-size: 7px; line-height: 2;"></div>
                <hr style="border: 1px solid var(--nb);">
                <button class="btn" style="background: var(--err); color: #fff; width: 100%;" onclick="core.format()">FORMAT C: (RESET)</button>
            </div>
        </main>

        <nav class="nav">
            <button class="nav-btn active" onclick="ui.tab('exe')">EXE</button>
            <button class="nav-btn" onclick="ui.tab('shop')">SHOP</button>
            <button class="nav-btn" onclick="ui.tab('skill')">SKL</button>
            <button class="nav-btn" onclick="ui.tab('dark')">NET</button>
            <button class="nav-btn" onclick="ui.tab('sys')">SYS</button>
        </nav>
    </div>

    <script>
        /* ЯДРО ИГРЫ (CORE) */
        const core = {
            bytes: 0,
            spd: 0,
            pwr: 1,
            lvl: 1,
            exp: 0,
            pts: 0,
            totalClicks: 0,
            totalEarned: 0,
            
            bossActive: false,
            bossHP: 0,
            bossMaxHP: 0,
            bossReward: 0,

            // Базы данных
            hardware: [
                { id: 0, name: '9600-Baud Modem', cost: 15, spd: 1, pwr: 1, desc: 'Начальная скорость.' },
                { id: 1, name: 'Coprocessor 387', cost: 120, spd: 6, pwr: 4, desc: 'Ускоряет вычисления.' },
                { id: 2, name: 'Voodoo Graphics', cost: 750, spd: 25, pwr: 12, desc: 'Визуализация кода.' },
                { id: 3, name: 'Fiber Optic Card', cost: 4500, spd: 120, pwr: 50, desc: 'Световая скорость.' },
                { id: 4, name: 'Quantum Cell', cost: 25000, spd: 600, pwr: 200, desc: 'Взлом реальности.' }
            ],

            skills: [
                { id: 0, name: 'Multi-Threading', cost: 1, type: 'spd_mult', val: 1.25, desc: '+25% к пассивному доходу.' },
                { id: 1, name: 'Overclock Click', cost: 2, type: 'pwr_mult', val: 2.0, desc: 'Удваивает силу клика.' },
                { id: 2, name: 'Root Exploit', cost: 3, type: 'crit', val: 0.15, desc: '+15% шанс крит-кликов (x10).' },
                { id: 3, name: 'AI Automator', cost: 5, type: 'auto', val: 1, desc: 'Авто-клики каждую секунду.' }
            ],

            darkDeals: [
                { name: 'Satoshi Drive', cost: 100000, effect: 'win', desc: 'Купить всё и сразу (Заглушка).' },
                { name: 'Ghost Protocol', cost: 5000, effect: 'pts', val: 5, desc: 'Получить +5 очков навыков.' }
            ],

            ownedHw: [],
            ownedSkills: [],
            critChance: 0.02,

            init() {
                this.load();
                setInterval(() => this.loop(), 100);
                setInterval(() => this.save(), 10000);
                ui.renderAll();
            },

            loop() {
                // Пассивный доход
                let currentSpd = this.spd;
                this.ownedSkills.forEach(sId => {
                    if(this.skills[sId].type === 'spd_mult') currentSpd *= this.skills[sId].val;
                });

                if (currentSpd > 0) {
                    const tick = currentSpd / 10;
                    this.bytes += tick;
                    this.totalEarned += tick;
                }

                // Авто-клики
                if(this.ownedSkills.includes(3)) {
                    if(Math.random() < 0.1) this.tap({clientX: window.innerWidth/2, clientY: window.innerHeight/2, auto: true});
                }

                ui.update();
            },

            tap(e) {
                if (this.bossActive) {
                    this.attackBoss(e);
                    return;
                }

                let gain = this.pwr;
                this.ownedSkills.forEach(sId => {
                    if(this.skills[sId].type === 'pwr_mult') gain *= this.skills[sId].val;
                });

                let crit = Math.random() < this.critChance;
                if(crit) gain *= 10;

                this.bytes += gain;
                this.totalEarned += gain;
                this.exp += 1;
                this.totalClicks++;

                ui.particle(e, `+${Math.floor(gain)}`, crit ? varHex('--gold') : '#fff');
                ui.logCmd(crit);

                if(this.exp >= this.lvl * 100) this.levelUp();
                
                // Шанс появления босса
                if(this.totalClicks % 200 === 0) this.spawnBoss();
            },

            levelUp() {
                this.exp = 0;
                this.lvl++;
                this.pts += 2;
                ui.flash();
                ui.logSys(`SYSTEM UPGRADE: LEVEL ${this.lvl} REACHED. +2 PTS.`);
            },

            attackBoss(e) {
                let dmg = this.pwr * 2;
                this.bossHP -= dmg;
                ui.particle(e, `DMG: ${Math.floor(dmg)}`, varHex('--err'));
                if(this.bossHP <= 0) this.defeatBoss();
                ui.update();
            },

            spawnBoss() {
                this.bossActive = true;
                this.bossMaxHP = this.lvl * 500;
                this.bossHP = this.bossMaxHP;
                this.bossReward = this.lvl * 1000;
                ui.logSys(`WARNING: FIREWALL DETECTED! ACCESS BLOCKED.`);
                ui.tab('exe');
            },

            defeatBoss() {
                this.bossActive = false;
                this.bytes += this.bossReward;
                this.totalEarned += this.bossReward;
                this.exp += 50;
                ui.flash();
                ui.logSys(`FIREWALL BREACHED! REWARD: ${this.bossReward}B`);
                ui.renderAll();
            },

            buyHw(id) {
                const h = this.hardware[id];
                if(this.bytes >= h.cost) {
                    this.bytes -= h.cost;
                    this.spd += h.spd;
                    this.pwr += h.pwr;
                    this.ownedHw.push(id);
                    h.cost = Math.floor(h.cost * 1.55);
                    ui.renderAll();
                }
            },

            learnSkill(id) {
                const s = this.skills[id];
                if(this.pts >= s.cost && !this.ownedSkills.includes(id)) {
                    this.pts -= s.cost;
                    this.ownedSkills.push(id);
                    if(s.type === 'crit') this.critChance += s.val;
                    ui.renderAll();
                }
            },

            save() {
                const d = {
                    b: this.bytes, s: this.spd, p: this.pwr, l: this.lvl, e: this.exp, pt: this.pts,
                    tc: this.totalClicks, te: this.totalEarned, oh: this.ownedHw, os: this.ownedSkills,
                    hCosts: this.hardware.map(h => h.cost)
                };
                localStorage.setItem('tg_god_save', JSON.stringify(d));
            },

            load() {
                const s = localStorage.getItem('tg_god_save');
                if(s) {
                    const d = JSON.parse(s);
                    this.bytes = d.b; this.spd = d.s; this.pwr = d.p; this.lvl = d.l;
                    this.exp = d.e; this.pts = d.pt; this.totalClicks = d.tc;
                    this.totalEarned = d.te || d.b; this.ownedHw = d.oh; this.ownedSkills = d.os;
                    d.hCosts.forEach((c, i) => this.hardware[i].cost = c);
                }
            },

            format() {
                if(confirm("CONFIRM SYSTEM FORMAT? ALL DATA WILL BE LOST.")) {
                    localStorage.clear();
                    location.reload();
                }
            }
        };

        /* ИНТЕРФЕЙС (UI) */
        const ui = {
            activeTab: 'exe',
            tab(t) {
                this.activeTab = t;
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                document.getElementById(`s-${t}`).classList.add('active');
                event.currentTarget.classList.add('active');
                if(t === 'sys') this.renderStats();
            },

            update() {
                document.getElementById('v-bytes').innerText = Math.floor(core.bytes).toLocaleString();
                document.getElementById('v-spd').innerText = core.spd.toLocaleString();
                document.getElementById('v-lvl').innerText = core.lvl;
                document.getElementById('v-pts').innerText = core.pts;

                const xpNext = core.lvl * 100;
                document.getElementById('f-exp').style.width = (core.exp / xpNext * 100) + '%';
                document.getElementById('t-exp').innerText = `${core.exp} / ${xpNext} XP`;

                if(core.bossActive) {
                    document.getElementById('boss-ui').classList.add('boss-active');
                    document.getElementById('f-boss').style.width = (core.bossHP / core.bossMaxHP * 100) + '%';
                    document.getElementById('t-boss').innerText = `HP: ${Math.floor(core.bossHP)}`;
                } else {
                    document.getElementById('boss-ui').classList.remove('boss-active');
                }
            },

            logCmd(crit) {
                const l = document.getElementById('log');
                const pool = ["TCP_HANDSHAKE", "MD5_CRACK", "PROXY_ROUTE", "GET_AUTH_TOKEN", "SQL_INJECT", "SSL_STRIP"];
                const d = document.createElement('div');
                d.className = 'line';
                if(crit) d.style.color = 'var(--gold)';
                d.innerText = `> ${pool[Math.floor(Math.random()*pool.length)]} ${crit ? '[CRIT!]' : ''}`;
                l.appendChild(d);
                if(l.children.length > 15) l.removeChild(l.firstChild);
                l.scrollTop = l.scrollHeight;
            },

            logSys(m) {
                const l = document.getElementById('log');
                const d = document.createElement('div');
                d.className = 'line';
                d.style.color = 'var(--blue)';
                d.innerText = `[SYS]: ${m}`;
                l.appendChild(d);
                l.scrollTop = l.scrollHeight;
            },

            particle(e, t, c) {
                const p = document.createElement('div');
                p.className = 'p';
                p.innerText = t;
                p.style.color = c;
                p.style.left = (e.clientX || window.innerWidth/2) + 'px';
                p.style.top = (e.clientY || window.innerHeight/2) + 'px';
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 800);
            },

            flash() {
                const f = document.getElementById('flash');
                f.style.opacity = '0.5';
                setTimeout(() => f.style.opacity = '0', 100);
            },

            renderShop() {
                const c = document.getElementById('shop-list');
                c.innerHTML = core.hardware.map((h, i) => `
                    <div class="card">
                        <div class="card-meta">
                            <span class="card-name">${h.name}</span>
                            <span class="card-desc">${h.desc}</span>
                            <span class="card-price">COST: ${h.cost}B | SPD+${h.spd}</span>
                        </div>
                        <button class="btn" onclick="core.buyHw(${i})" ${core.bytes < h.cost ? 'disabled' : ''}>BUY</button>
                    </div>
                `).join('');
            },

            renderSkills() {
                const c = document.getElementById('skill-list');
                c.innerHTML = core.skills.map((s, i) => {
                    const owned = core.ownedSkills.includes(i);
                    return `
                    <div class="card" style="${owned ? 'border-color: var(--blue)' : ''}">
                        <div class="card-meta">
                            <span class="card-name">${s.name} ${owned ? '[MAX]' : ''}</span>
                            <span class="card-desc">${s.desc}</span>
                            <span class="card-price" style="color: var(--blue)">COST: ${s.cost} PTS</span>
                        </div>
                        <button class="btn" onclick="core.learnSkill(${i})" ${owned || core.pts < s.cost ? 'disabled' : ''}>${owned ? 'OK' : 'LRN'}</button>
                    </div>
                `}).join('');
            },

            renderDark() {
                const c = document.getElementById('dark-list');
                c.innerHTML = core.darkDeals.map(d => `
                    <div class="card" style="border-color: var(--purp)">
                        <div class="card-meta">
                            <span class="card-name" style="color: var(--purp)">${d.name}</span>
                            <span class="card-desc">${d.desc}</span>
                            <span class="card-price">COST: ${d.cost}B</span>
                        </div>
                        <button class="btn" onclick="alert('DARKNET ERROR: ENCRYPTED')" disabled>???</button>
                    </div>
                `).join('');
            },

            renderStats() {
                document.getElementById('stat-content').innerHTML = `
                    TOTAL_BYTES_EARNED: ${Math.floor(core.totalEarned)}<br>
                    TOTAL_KEY_STROKES: ${core.totalClicks}<br>
                    HARDWARE_COUNT: ${core.ownedHw.length}<br>
                    ACTIVE_EXPLOITS: ${core.ownedSkills.length}<br>
                    TIME_SINCE_BOOT: ${Math.floor(performance.now()/1000)}s
                `;
            },

            renderAll() {
                this.renderShop();
                this.renderSkills();
                this.renderDark();
                this.update();
            }
        };

        // Хелпер для получения цвета из CSS
        function varHex(name) { return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

        // ЗАПУСК
        document.getElementById('tap-zone').onclick = (e) => { if(ui.activeTab === 'exe') core.tap(e); };
        core.init();
    </script>
</body>
</html>
